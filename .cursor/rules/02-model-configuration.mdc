---
description:
globs:
alwaysApply: false
---
# 模型配置与API调用

本项目支持多种大语言模型，包括付费模型和免费模型。

## 默认配置

在[background.js](mdc:background.js)和[popup.js](mdc:popup.js)中，已预配置以下默认值：

- 默认模型: `THUDM/GLM-4-9B-0414`
- 默认API密钥: `sk-yhszqcrexlxohbqlqjnxngoqenrtftzxvuvhdqzdjydtpoic`
- 默认API端点: `https://api.siliconflow.cn/v1/chat/completions`

## 支持的模型

### 免费模型
- `THUDM/GLM-4-9B-0414` - 智谱AI的GLM-4-9B模型
- `Qwen/Qwen2.5-7B-Instruct` - 阿里通义千问2.5-7B模型
- `Qwen/Qwen2.5-Coder-7B-Instruct` - 阿里通义千问2.5代码专用模型
- `THUDM/glm-4-9b-chat` - 智谱AI的GLM-4-9B聊天模型

### 付费模型
- OpenAI系列: `gpt-3.5-turbo`, `gpt-4`
- Anthropic系列: `claude-3`
- Google系列: `gemini-pro`

## API请求格式

模型API请求在[background.js](mdc:background.js)和[popup.js](mdc:popup.js)中处理，每种模型有不同的请求格式：

1. 免费模型 (`THUDM/` 或 `Qwen/` 开头):
```javascript
{
  model: model,
  messages: [
    { role: "system", content: systemPrompt },
    { role: "user", content: text }
  ],
  temperature: 0.3
}
```

2. OpenAI模型:
```javascript
{
  model: model,
  messages: [
    { role: "system", content: systemPrompt },
    { role: "user", content: text }
  ],
  temperature: 0.3
}
```

3. Claude模型:
```javascript
{
  model: model,
  system: systemPrompt,
  messages: [
    { role: "user", content: text }
  ],
  max_tokens: 1000
}
```

4. Gemini模型:
```javascript
{
  contents: [
    {
      role: "user",
      parts: [{ text: systemPrompt + "\n\n" + text }]
    }
  ],
  generationConfig: {
    temperature: 0.2
  }
}
```
